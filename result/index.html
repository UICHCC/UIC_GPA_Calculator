<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!--<link rel="icon" href="../../../../favicon.ico">-->

    <title>UIC GPA Calculator</title>

    <!-- Bootstrap core CSS -->
    <link href="https://cdn.bootcss.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
</head>

<body onload="fill_in_info()">

<div class="container">
    <h1 class="my-3">我的小目标</h1>
    <p class="text-muted">UIC GPA Calculator 2.0</p>
    <div class="card">
        <div class="card-body" id="aim-card">
            <h5 class="card-title">你的目标是：<span id="aim-title"></span></h5>
            <h6 class="card-subtitle mb-2 text-muted">你现在的 cGPA是：<span id="current-title"></span></h6>
            <p class="card-text">想要达成目标，接下来每个学期的 sGPA 要在 <span id="keep-gpa"></span> 或以上喔~<span id="alert-words"></span></p>
            <a href=".." class="card-link">再立一个目标</a>
        </div>
    </div>
</div>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/popper.js/1.10.0/umd/popper.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script>
    let major_units = $.parseJSON("{\"ACCT\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"FIN\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"AE\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"MHR\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"MKT\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"EBIS\":{\"2015\":null,\"2016\":null,\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6}},\"EPIN\":{\"2015\":null,\"2016\":null,\"2017\":null,\"2018\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6}},\"CTV\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"CCM\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":20,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2017\":{\"1\":17,\"2\":20,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"MAD\":{\"2015\":null,\"2016\":{\"1\":17,\"2\":20,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2017\":{\"1\":17,\"2\":20,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"ATS\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"CELL\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":null,\"2017\":null,\"2018\":null},\"ELLS\":{\"2015\":null,\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"GIR\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"IJ\":{\"2015\":{\"1\":17,\"2\":17,\"3\":18,\"4\":20,\"5\":19,\"6\":16,\"7\":17,\"8\":8},\"2016\":{\"1\":17,\"2\":17,\"3\":18,\"4\":20,\"5\":19,\"6\":16,\"7\":17,\"8\":8},\"2017\":{\"1\":17,\"2\":17,\"3\":18,\"4\":20,\"5\":19,\"6\":16,\"7\":17,\"8\":8},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"PRA\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"SWSA\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":9},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":9},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":21,\"7\":15,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"TESL\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":null,\"2017\":null,\"2018\":null},\"APSY\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"CST\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":20,\"5\":19,\"6\":19,\"7\":15,\"8\":6},\"2016\":{\"1\":17,\"2\":18,\"3\":19,\"4\":20,\"5\":18,\"6\":19,\"7\":15,\"8\":6},\"2017\":{\"1\":17,\"2\":18,\"3\":19,\"4\":20,\"5\":18,\"6\":19,\"7\":15,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"DS\":{\"2015\":null,\"2016\":null,\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":20,\"5\":19,\"6\":19,\"7\":15,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"ENVS\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"FM\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":20,\"2\":20,\"3\":19,\"4\":16,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2017\":{\"1\":20,\"2\":20,\"3\":19,\"4\":16,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"FST\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":9},\"2016\":{\"1\":17,\"2\":20,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2017\":{\"1\":17,\"2\":20,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":15,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}},\"STAT\":{\"2015\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2016\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2017\":{\"1\":17,\"2\":17,\"3\":19,\"4\":19,\"5\":18,\"6\":18,\"7\":18,\"8\":6},\"2018\":{\"1\":null,\"2\":null,\"3\":null,\"4\":null,\"5\":null,\"6\":null,\"7\":null,\"8\":null}}}");

    function getSearchParameters() {
        let prmstr = window.location.search.substr(1);
        return prmstr != null && prmstr !== "" ? transformToAssocArray(prmstr) : {};
    }

    function transformToAssocArray( prmstr ) {
        var params = {};
        var prmarr = prmstr.split("&");
        for ( var i = 0; i < prmarr.length; i++) {
            var tmparr = prmarr[i].split("=");
            params[tmparr[0]] = tmparr[1];
        }
        return params;
    }

    let params = getSearchParameters();

    function fill_in_info() {
        let calculation_result = cal_gpa().toFixed(2);
        $("#keep-gpa").text(calculation_result);
        if(calculation_result > 4.0){
            $("#alert-words").text("（想想都知道不可能啦）");
        }else if(calculation_result < 1.67){
            $("#alert-words").text("（你真这么玩，就是在退学边缘试探）");
        }
    }
    function cal_gpa(){
        let current_sem = params["current_sem"];
        let aim_sem = params["aim_sem"];
        let current_gpa = params["current_gpa"];
        let aim_gpa = params["aim_gpa"];
        let added_units = params["added_units"] === "" ? 0 : parseInt(params["added_units"]);
        let dropped_units = params["dropped_units"] === "" ? 0 : parseInt(params["dropped_units"]);
        let major = params["major"];
        let admission_year = params["admission_year"];

        let current_units = sum_up_units(current_sem, major, admission_year);
        let aim_units = sum_up_units(aim_sem, major, admission_year);

        $("#aim-title").text("在" + get_semester_name(aim_sem) +" cGPA 达到：" + aim_gpa);
        $("#current-title").text(current_gpa);
        return -((aim_gpa * aim_units - current_gpa * current_units) / (current_units - aim_units));
    }

    function get_semester_name(sem) {
        switch (sem){
            case "1":
                return "大一上学期";
            case "2":
                return "大一下学期";
            case "3":
                return "大二上学期";
            case "4":
                return "大二下学期";
            case "5":
                return "大三上学期";
            case "6":
                return "大三下学期";
            case "7":
                return "大四上学期";
            case "8":
                return "大四下学期";
        }
    }

    function sum_up_units(semester, major, admission){
        var units_set;
        switch (major) {
            case "ACCT":
                units_set = major_units.ACCT[admission];
                break;
            case "FIN":
                units_set = major_units.FIN[admission];
                break;
            case "AE":
                units_set = major_units.AE[admission];
                break;
            case "MHR":
                units_set = major_units.MHR[admission];
                break;
            case "MKT":
                units_set = major_units.MKT[admission];
                break;
            case "EBIS":
                units_set = major_units.EBIS[admission];
                break;
            case "EPIN":
                units_set = major_units.EPIN[admission];
                break;
            case "MAD":
                units_set = major_units.MAD[admission];
                break;
            case "CTV":
                units_set = major_units.CTV[admission];
                break;
            case "CCM":
                units_set = major_units.CCM[admission];
                break;
            case "ATS":
                units_set = major_units.ATS[admission];
                break;
            case "CELL":
                units_set = major_units.CELL[admission];
                break;
            case "ELLS":
                units_set = major_units.ELLS[admission];
                break;
            case "GIR":
                units_set = major_units.GIR[admission];
                break;
            case "IJ":
                units_set = major_units.IJ[admission];
                break;
            case "PRA":
                units_set = major_units.PRA[admission];
                break;
            case "SWSA":
                units_set = major_units.SWSA[admission];
                break;
            case "TESL":
                units_set = major_units.TESL[admission];
                break;
            case "APSY":
                units_set = major_units.APSY[admission];
                break;
            case "CST":
                units_set = major_units.CST[admission];
                break;
            case "DS":
                units_set = major_units.DS[admission];
                break;
            case "ENVS":
                units_set = major_units.ENVS[admission];
                break;
            case "FM":
                units_set = major_units.FM[admission];
                break;
            case "FST":
                units_set = major_units.FST[admission];
                break;
            case "STAT":
                units_set = major_units.STAT[admission];
                break;
        }
        var units = 0;
        switch (semester){
            case "8":
                units += units_set[8];
            case "7":
                units += units_set[7];
            case "6":
                units += units_set[6];
            case "5":
                units += units_set[5];
            case "4":
                units += units_set[4];
            case "3":
                units += units_set[3];
            case "2":
                units += units_set[2];
            case "1":
                units += units_set[1];
        }
        return units;
    }
</script>
</body>
</html>
